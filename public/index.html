<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CRM | faqudeveloper</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root { --accent: #007bff; }
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Inter', sans-serif; }
        
        /* BEJELENTKEZŐ PANEL */
        #login-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #fff; z-index: 9999; display: flex; align-items: center; justify-content: center;
        }
        .login-card {
            width: 100%; max-width: 350px; padding: 40px; text-align: center;
            border: 1px solid #eee; border-radius: 15px; box-shadow: 0 10px 25px rgba(0,0,0,0.05);
        }
        .login-card h2 { margin-bottom: 20px; font-weight: 800; letter-spacing: -1px; }
        .login-card input { width: 100%; padding: 12px; margin-bottom: 10px; border: 1px solid #ddd; border-radius: 8px; }
        .login-btn { width: 100%; padding: 12px; background: #000; color: #fff; border: none; border-radius: 8px; font-weight: bold; cursor: pointer; }

        /* CRM ELRENDEZÉS */
        #crm-app { display: none; } /* Alapból rejtve a belépésig */
        body { background: #f4f4f4; display: flex; min-height: 100vh; }
        .sidebar { width: 260px; background: #000; color: #fff; position: fixed; height: 100vh; transition: 0.3s; }
        .sidebar-h { padding: 35px 20px; text-align: center; font-weight: bold; border-bottom: 1px solid #222; }
        .sidebar-m ul { list-style: none; padding-top: 20px; }
        .sidebar-m li { padding: 15px 25px; cursor: pointer; color: #888; display: flex; align-items: center; gap: 15px; }
        .sidebar-m li.active { color: #fff; background: #111; border-left: 4px solid var(--accent); }
        .main { flex: 1; margin-left: 260px; padding: 25px; }
        .card { background: #fff; padding: 25px; border-radius: 12px; border: 1px solid #eee; }
        .footer { position: fixed; bottom: 20px; left: 80px; color: var(--accent); font-weight: bold; font-size: 0.8rem; }
        
        @media (max-width: 768px) {
            .sidebar { transform: translateX(-100%); }
            .main { margin-left: 0; }
        }
    </style>
</head>
<body>

    <div id="login-overlay">
        <div class="login-card">
            <h2 id="login-brand">CRM PANEL</h2>
            <input type="text" id="user" placeholder="Felhasználónév">
            <input type="password" id="pass" placeholder="Jelszó">
            <button class="login-btn" onclick="checkLogin()">Belépés</button>
        </div>
    </div>

    <div id="crm-app" style="width: 100%; display: flex;">
        <aside class="sidebar">
            <div class="sidebar-h" id="brand-name">BETÖLTÉS...</div>
            <nav class="sidebar-m"><ul id="menu-list"></ul></nav>
            <div class="footer">faqudeveloper</div>
        </aside>
        <main class="main">
            <h1 id="welcome-text" style="margin-bottom: 20px;">Üdvözöljük!</h1>
            <div class="card" id="main-content">Adatok betöltése...</div>
        </main>
    </div>

    <script>
        // Belépés ellenőrzése (egyszerű példa)
        function checkLogin() {
            const u = document.getElementById('user').value;
            const p = document.getElementById('pass').value;
            if(u === 'admin' && p === '1234') { // Ezt később az adatbázisból fogjuk
                document.getElementById('login-overlay').style.display = 'none';
                document.getElementById('crm-app').style.display = 'flex';
                loadConfig();
            } else {
                alert('Hibás adatok!');
            }
        }

        async function loadConfig() {
            const res = await fetch('/api/config');
            const config = await res.json();
            
            document.documentElement.style.setProperty('--accent', config.color);
            document.getElementById('brand-name').innerText = config.brandName;
            document.getElementById('login-brand').innerText = config.brandName;

            const industries = {
                'SZERVIZ': { title: 'Szerviz Panel', menu: ['Munkalapok', 'Autók', 'Alkatrészek', 'Beállítások'] },
                'ETTEREM': { title: 'Étterem CRM', menu: ['Rendelések', 'Étlap', 'Asztalok', 'Beállítások'] },
                'SZALON': { title: 'Szalon CRM', menu: ['Időpontok', 'Vendégek', 'Szolgáltatások', 'Beállítások'] }
            };

            const data = industries[config.industry] || industries['SZERVIZ'];
            document.getElementById('welcome-text').innerText = data.title;
            document.getElementById('main-content').innerText = "Rendszer készen áll az alábbi profilhoz: " + config.brandName;
            
            const menuUl = document.getElementById('menu-list');
            menuUl.innerHTML = data.menu.map((m, i) => `<li class="${i===0?'active':''}"><span>${m}</span></li>`).join('');
        }
    </script>
</body>
</html>